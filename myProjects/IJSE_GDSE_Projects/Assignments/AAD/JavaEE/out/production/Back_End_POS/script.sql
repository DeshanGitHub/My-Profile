DROP DATABASE IF EXISTS JavaEE_POS;
CREATE DATABASE IF NOT EXISTS JavaEE_POS;
SHOW DATABASES;
USE JavaEE_POS;

DROP TABLE IF EXISTS customer;
CREATE TABLE IF NOT EXISTS customer(
    CID VARCHAR (15),
    Name VARCHAR (35) NOT NULL,
    Address TEXT NOT NULL,
    PhoneNumber VARCHAR (15) NOT NULL,
    CONSTRAINT PRIMARY KEY (CID)
);
SHOW TABLES;
DESCRIBE customer;

DROP TABLE IF EXISTS item;
CREATE TABLE IF NOT EXISTS item(
    Code VARCHAR (15),
    Name VARCHAR (35) NOT NULL,
    qty INT NOT NULL,
    price DECIMAL (15,2) NOT NULL,
    CONSTRAINT PRIMARY KEY (Code)
);
SHOW TABLES;
DESCRIBE item;


DROP TABLE IF EXISTS `Order`;
CREATE TABLE IF NOT EXISTS `Order`(
    oId VARCHAR (15),
    CID VARCHAR (15) NOT NULL,
    oDate DATE NOT NULL,
    oTime TIME NOT NULL,
    oCost DECIMAL (15,2) NOT NULL,
    CONSTRAINT PRIMARY KEY (oId),
    CONSTRAINT FOREIGN KEY(CID) REFERENCES customer(CID)
    ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESCRIBE `Order`;


DROP TABLE IF EXISTS `OrderDetail`;
CREATE TABLE IF NOT EXISTS `OrderDetail`(
    oId VARCHAR (15) NOT NULL,
    Code VARCHAR (15) NOT NULL,
    qty INT NOT NULL,
    cost DECIMAL (15,2) NOT NULL,
    CONSTRAINT FOREIGN KEY(oId) REFERENCES `Order`(oId)
    ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT FOREIGN KEY(Code) REFERENCES item(Code)
    ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESCRIBE `OrderDetail`;